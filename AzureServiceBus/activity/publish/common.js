"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var rxjs_extensions_1=require("wi-studio/common/rxjs-extensions");require("wi-studio/common/rxjs-extensions");var Connection=function(){function e(){}return e.getConnection=function(t){var n=new e;return rxjs_extensions_1.Observable.from(t.settings).reduce(function(e,t){return e[t.name]=t.value,e},n)},e.prototype.getEntityTypes=function(){return rxjs_extensions_1.Observable.of(this.DocsMetadata).map(function(e){return JSON.parse(e)}).map(function(e){return e.entityTypes})},e.prototype.getPathsForObject=function(e,t){return rxjs_extensions_1.Observable.of(this.DocsMetadata).map(function(e){return JSON.parse(e)}).mergeMap(function(n){return rxjs_extensions_1.Observable.from(Object.keys(n.paths)).filter(function(r){return r.startsWith("/"+e)&&n.paths[r][t]})})},e.prototype.getOperationsForService=function(e,t){return rxjs_extensions_1.Observable.of(this.DocsMetadata).map(function(e){return JSON.parse(e)}).mergeMap(function(n){return rxjs_extensions_1.Observable.from(Object.keys(n.paths)).filter(function(r){return r.startsWith("/"+e)&&n.paths[r][t]}).reduce(function(e,r){return e.push(n.paths[r][t].action),e},[])})},e.prototype.getSchemaForPath=function(e,t){return rxjs_extensions_1.Observable.of(this.DocsMetadata).map(function(e){return JSON.parse(e)}).mergeMap(function(n){return rxjs_extensions_1.Observable.from(Object.keys(n.paths)).filter(function(r){return r===e&&n.paths[r][t]}).map(function(e){return n.paths[e][t].schema})})},e.prototype.getSchemaForPublish=function(e,t){return rxjs_extensions_1.Observable.of(this.DocsMetadata).map(function(e){return JSON.parse(e)}).mergeMap(function(n){return rxjs_extensions_1.Observable.from(Object.keys(n.paths)).filter(function(r){return n.paths[r][t]&&n.paths[r][t].action===e}).map(function(e){return Object.assign(n.paths[e][t].schema,{path:e}),n.paths[e][t].schema})})},e}();exports.Connection=Connection;